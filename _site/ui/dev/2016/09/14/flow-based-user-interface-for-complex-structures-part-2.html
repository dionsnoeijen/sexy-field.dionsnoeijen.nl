<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Flow based user interface for complex structures (part 2)</title>
  <meta name="description" content="Part 1 was the introduction to this article. Read it if you like a little more background on the subject. Otherwise just skip it and dive in head first.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/ui/dev/2016/09/14/flow-based-user-interface-for-complex-structures-part-2.html">
  <link rel="alternate" type="application/rss+xml" title="Vegan Developer" href="http://localhost:4000/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Vegan Developer</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Flow based user interface for complex structures (part 2)</h1>
    <p class="post-meta"><time datetime="2016-09-14T16:12:00+02:00" itemprop="datePublished">Sep 14, 2016</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Dion</span></span></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><a href="https://dionsnoeijen.github.io/ui/dev/2016/08/11/flow-based-user-interface-for-complex-structures-part-1.html" title="Part 1">Part 1</a> was the introduction to this article. Read it if you like a little more background on the subject. Otherwise just skip it and dive in head first.</p>

<p>To explore this idea I have for a node or flow based ui for web development I need to define from where I’m reasoning.</p>

<p>First, I speak of web development, but my main goal is to create a user interface that enables a simplified way of creating a website that’s content managed. From there on I see a lot of other possibilities but for now I stick to the plan.</p>

<p>Second, this is a concept and the fictional website is intentionally simplified.</p>

<p>Last, I try to create a user interface that’s simple, but not too simple. I favor flexibility over simplicity.</p>

<p>The fictional website I’m aiming to build is nothing more than website containing products, showing a list of products and a product detail page. Those products are managed through a backend that’s behind a user login page. Containing a product list for visitors and a way to add and edit products for content editors. To spice things up a little it’s a multi lingual setup containing only two languages namely dutch and english. Adhering to my last point, the product has only the most essential fields. There is no need for more because I only want to convey the idea.</p>

<p>First, I imagine, I would want to model the product. The product is mainly made up of fields. Those fields are more than a simple column in the database. In fact they are much more like a field as seen in some content management systems like ExpressionEngine or Craft where a field is a way of defining much more than just a table column. It also provides all the ui elements needed for the content editors. The content’s of the field can easily be used inside a template. It depends on the field type what it can provide.</p>

<p>Let’s start by creating a breadboard on the grid.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/breadboard-product-1.PNG" alt="Breadboard product model" /></p>

<p><span class="sub">The breadbox should be resizable at any time</span></p>

<p>Surely I would like to have a name for this breadboard, and, I think I need types for a breadboard in certain cases. I will get back to that later on. But this is a “model” type breadboard.</p>

<p>I think those type of settings should be available by double clicking or tapping it. It would open a dialogue box that contains fields for the name and type.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/breadboard-dialog.PNG" alt="Breadboard model type dialogue" /></p>

<p>For this product we probably need a name, let’s start by adding a input text field. Again, this field would need some settings. Double clicking on the field gives a dialogue belonging to this specific input field. A name and a handle would be essential. Maybe an optional default text. The field on the breadbox shows it’s label by default. I think there should be one block reserved for the icon belonging to the field. To the left we would have a menu containing all elements you can stick to the breadboard or onto the grid itself. More on the menu later on.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/breadboard-product-2.PNG" alt="Breadboard with input text attached" /></p>

<p>To the left we have an input circle available. It’s meant to accept connecting wires. To the right we have an output circle available, you can drag a connection wire from it.</p>

<p>This field on itself does not contain enough functionality on it’s own. I need extra functionality to make this work in a real world context. For starters, I would like it to be a required field. But I also want the input length limited and from this field I would like to generate an anchor or slug that I can use later on. (If the name is “Super product” the anchor would be <code class="highlighter-rouge">super-product</code>) At this point the breadboard comes in handy. Instead of already creating wires I can simply stick modifiers to the board enabling those simple modifications for this field.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/breadboard-product-3.PNG" alt="Breadboard with modified input text output" /></p>

<p>So, instead of having the output of the field connected to the edge of the breadboard I sized it down to the middle. First I connected a required modifier. Then I have a length modifier and that output is on the right edge of the breadboard making an output circle on the breadboard or node level. Below I have an anchor modifier. The output from the length modifier is also fed into the anchor modifier that’s bringing it’s own output to the right edge of the node. Now we have a defined a required input field, limited characters and we defined an anchor based on this field.</p>

<p>The next field is a description field. In this case I imagine a rich text editor type of field, also limited but not required.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/breadboard-product-4.PNG" alt="Added the description field to the breadboard" /></p>

<p>The product also requires a price. I would like to min / max the price input, just because I can. And this field is required. Also, I feel I want output in different currencies because we are creating a multi lingual setup. The required modifier provides output, we can make connectors on the breadboard splitting up the output to other modifiers. In this case it goed directly to the euro output and I route it to a math modifier so I can make up for the currency difference and direct it to the dollar output.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/breadboard-product-5.PNG" alt="Added the price field to the breadboard" /></p>

<p><span class="sub">The MM modifier is for limiting the numeric input to only contain a value between 0 and 100</span></p>

<p>Now I just add two date fields, containing the creation and update date. Both are required. On creation both are set to the creation date. The last modifier is an output modifier. Later on it will become clear what it’s used for.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/breadboard-product-6.PNG" alt="Added the creation and update date fields" /></p>

<p>Let’s start by using this model for some basic crud functionality for the content editors. We need a list of products and a way to add a new product. Since I have two languages a tabbed interface might do just fine. But I need a way to have the same fields two times in my layout. Actually I need a way to make groups of fields so I can differentiate between them while creating the template for the create / edit page. So I would create two new breadboards of the same size and add a grouping modifier to it. This modifier accepts input from fields, duplicating the field setup.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/the-language-field-groups.PNG" alt="The language field groups" /></p>

<p><span class="sub">It would be quite awesome to overrule specific values like the label.</span></p>

<p>At this point I’m starting to think about metadata that should be coming from the breadboard. Metadata should be sent along the flow, providing context where needed. In this case I think I would at least need a group identification so I can keep apart the fields in my template. Speaking of templates, it’s time to add a render node. Again I create a breadboard and I stick a render action to it. To it’s output I add a post modifier that I can use to act upon post data.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/first-render-node.PNG" alt="The render node" /></p>

<p><span class="sub">The render node I deem simple enough to leave out the breadboard title. The filename, icon and P modifier speak for themselves. Having that said, you should be able to add a title to a breadboard at any time.</span></p>

<p>Let’s wire things up to see what we are getting at.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/wired-product-admin-boards.PNG" alt="Wired breadboards" /></p>

<p>Ok, we defined fields, grouped them and I have a template (*Product add edit) that produces post data, handled by the P variable attached to the template output. We use this post data to create or update the product. We need a “save” action, that comes equipped with an if block. That way we have the ability to add output on success and on failure. It know’s failure or success because the stream of data provides context. It has post data related to the model that also resides in the stream. The model has validation, that’s what the outcome is based upon.</p>

<p>On success we render a new page, telling the content editor everything is fine. Also, we drag two lines back to the model date fields. Depending on if this is a new entry, we need a creation date. And if it’s an update, we need the updated date. This immediately poses some questions. Mainly, is the date updated after the fact? I think not, the connections to the model should only indicate that we also need to generate one of these dates. The system behind the interpretation of this entanglement should be smart enough to know how to act.</p>

<p>Now, we have a very basic setup on how the data should flow on the administrator side of the application, but we are missing some essential parts. For starters, there’s no routing available. And if we have routing, we need a way of authentication and authorization aswel. So let’s start with that.</p>

<p>First I would need an entrance point, something representing a user making a request. This is represented by a circle with a cloud. It needs a simple output node. In case of the content editors part, we would need to see if the user is logged in. If so, lead the request straight to the admin routes. Depending on the information in the request it chooses it’s route. Say we were to visit the admin/products route. First we need to fetch the products. This can be done with the products query. We continue to link the route output to the sql input of the products query node. This is a breadboard made up of a SQL action and an IF action. The sql action is responsible for the query. On success it immediately goes on to connect to the render node. Responsible for rendering the products overview template for the administrator view. The query is using an offset and a limit to accommodate for pagination. How can it know? Maybe we should introduce some get variables like this: ?offset=0&amp;limit=25 but I can imagine more elegant ways to do so. This is for a later article where I explore ways to make this entire setup even more elegant. For now this kind of detail only obfuscates the general idea.</p>

<p>This completes the flow from a request to a certain route, fetching the items and rendering an overview page.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/without-user-and-frontend.PNG" alt="Completed flow to product admin overview" /></p>

<p>How does it know how we are expecting to return to the admin page you might ask yourself by now? This is because of the route. Every step the flow progresses is aware of the previous steps meaning it’s aware of the route that was requested. Based on that the system knows where to go. This brings up the need for metadata again. The breadboards need a way to know where they belong so to speak. The route and the render node should know they belong to the admin side of things.</p>

<p>We probably want to know about the logged in user aswell. To do that we have to make a user model.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/user-model.PNG" alt="User model" /></p>

<p>The user model is connected to a query breadboard, fetching the user if not already present. When unable to fetch the user it will redirect to the login page. Otherwise the information is passed to the template aswel. Making available a lot of useful data we can use in our template. I imagine a twig template, that at this point would have access to the products, user and the request. In a pseudo Json form it might look like something like this.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lorem Ipsum"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dolor Sit"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"price_euro"</span><span class="p">:</span><span class="w"> </span><span class="s2">"€200,00"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"price_dollar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$224,23"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"creation_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-DDThh:mmTZD"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"..."</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Henkie"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"henkie@example.me"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"..."</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin/product/super-cool/edit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><span class="sub">This is much simplified</span></p>

<p>The other routes for the admin part probably start to make sense on their own now. So I leave it for you to see if you can make something of it. We haven’t covered what happends when a user attempts to login but fails. The user may have to create an account. however, I have ideas on how to make that flow more sense using groups like I discussed in the previous article. I will come back to that in the next article. Now it’s enough to discuss an over simplified login flow.</p>

<p>If the request comes in and finds itself to need a valid user whilst it hasn’t. The user node flows to the User routes. Triggering an action to the login page. The post values are used to query the user table and return to the admin routes on success.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/included-user-flow.PNG" alt="User login flow" /></p>

<p>Now! We also need the front-end, for user to browse the products and gaze at their relentless beauty. This flow is much simpler. A lot of what we need is already in place. We have the models and queries already in place. All we need is an extra block with routes. This block is accompanied with a languages block. The languages block has the ability to give output in a variable type of way. Making the {lang} usable in the routes blok. Prefixing the routes with language. I can imagine more elegant ways, to make routes totally dependent on the language. More on that in the next article ;). I think the front-end flow speaks for itself. One thing worth to mention is het product model. I made a modifier that duplicates it’s output nodes. That way you have a way better organize the flow, again preventing too many lines all over the place.</p>

<p>The menu should be simple, a matter of dragging and dropping stuff on the grid. The inner workings of the breadboard, especially on the ux side needs some thinking still.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/the-menu.PNG" alt="The menu" /></p>

<p>Here is what the user interface looks like at this point.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/everything.PNG" alt="Completed flow" /></p>

<p>Here is a pdf file with the design: <a href="https://s3-eu-west-1.amazonaws.com/dionsnoeijen/nodes/nodes.pdf">PDF</a></p>

<p>As you can see, we still have a lot going on and the risk of making an unintelligible mess is all too prevalent. In fact there still are a lot of open ends to the current status of this concept. I have a lot of ideas that I want to explore in the next article. Hopefully I can gather input that I can use for the refinement needed to make this a potentially powerful method of building logical and working application flows. Thank you!</p>


  </div>

</article>


        
        <div id="disqus_thread"></div>
        <script>

          /**
           *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
           *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
          /*
           var disqus_config = function () {
           this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
           this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
           };
           */
          (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '//dev-adventures.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li><a href="mailto:hallo@dionsnoeijen.nl">hallo@dionsnoeijen.nl</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/dionsnoeijen"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">dionsnoeijen</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/dionsnoeijen"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">dionsnoeijen</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Dion Snoeijen</p>
      </div>
    </div>

  </div>

</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-82471028-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
